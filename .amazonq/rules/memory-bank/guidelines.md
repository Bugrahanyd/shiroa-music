# Development Guidelines

## Code Quality Standards

### TypeScript Configuration
- **Strict Mode Enabled**: All TypeScript files must pass strict type checking
- **Target**: ES2017 for broad compatibility with modern features
- **Module System**: ESNext with bundler resolution for optimal tree-shaking
- **No Emit**: TypeScript used purely for type checking, compilation handled by Next.js
- **Incremental Compilation**: Enabled for faster subsequent builds
- **Path Aliases**: Use `@/*` for imports from src directory (e.g., `import { Component } from '@/components/Button'`)

### Code Formatting Patterns
- **Indentation**: 2 spaces (consistent across all files)
- **Quotes**: Double quotes for strings and JSX attributes
- **Semicolons**: Required at end of statements
- **Line Length**: Reasonable line breaks for readability (typically under 100 characters)
- **Trailing Commas**: Not used in object/array literals
- **Template Literals**: Used for string interpolation with variables

### File Naming Conventions
- **Components**: PascalCase with .tsx extension (e.g., `RootLayout.tsx`, `Home.tsx`)
- **Configuration**: kebab-case with appropriate extension (e.g., `next.config.ts`, `eslint.config.mjs`)
- **Styles**: kebab-case with .css extension (e.g., `globals.css`)
- **Type Definitions**: kebab-case with .d.ts extension (e.g., `next-env.d.ts`)

### Import Organization
1. External framework imports first (React, Next.js)
2. Type imports using `type` keyword (e.g., `import type { Metadata } from "next"`)
3. Font imports from next/font
4. Local style imports last (e.g., `import "./globals.css"`)
5. No blank lines between related imports

Example:
```typescript
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";
```

## Structural Conventions

### Component Structure
- **Default Exports**: All page and layout components use default export
- **Function Declaration**: Use `export default function ComponentName()` pattern
- **Type Annotations**: Props typed inline with Readonly for immutability
- **No Prop Destructuring**: Props accessed via parameter object

Example:
```typescript
export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (/* JSX */);
}
```

### React Server Components
- **Default Pattern**: All components are Server Components by default
- **No Client Directives**: Avoid 'use client' unless interactivity required
- **Async Components**: Can be async for data fetching at component level
- **Metadata Export**: Use exported metadata object for SEO

Example:
```typescript
export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};
```

### JSX Patterns
- **Self-Closing Tags**: Always use for components without children
- **Attribute Formatting**: Multi-line for readability when many attributes
- **className Usage**: Tailwind utility classes for all styling
- **Template Literals**: For dynamic className composition with template strings

Example:
```typescript
<div className={`${geistSans.variable} ${geistMono.variable} antialiased`}>
  {children}
</div>
```

## Tailwind CSS Practices

### Utility Class Patterns
- **Responsive Design**: Mobile-first with sm:, md:, lg: breakpoints
- **Dark Mode**: Use dark: prefix for dark mode variants
- **Flexbox Layout**: Primary layout method (flex, items-center, justify-center)
- **Spacing**: Consistent spacing scale (gap-4, gap-6, py-32, px-16)
- **Typography**: Semantic text sizes (text-3xl, text-lg, text-base)

### Common Class Combinations
- **Centering**: `flex items-center justify-center`
- **Full Height**: `min-h-screen` for viewport-height sections
- **Responsive Width**: `w-full max-w-3xl` for constrained content
- **Button Styling**: `rounded-full` for pill-shaped buttons
- **Transitions**: `transition-colors` for smooth hover effects

### Color System
- **Semantic Colors**: Use foreground/background CSS variables
- **Zinc Palette**: Primary grayscale (zinc-50, zinc-600, zinc-950)
- **Dark Mode**: Automatic via prefers-color-scheme media query
- **Opacity Modifiers**: Use bracket notation for custom opacity (e.g., `black/[.08]`)

Example:
```typescript
<a className="flex h-12 w-full items-center justify-center gap-2 rounded-full bg-foreground px-5 text-background transition-colors hover:bg-[#383838] dark:hover:bg-[#ccc] md:w-[158px]">
```

## Next.js Specific Patterns

### Image Optimization
- **Always Use next/image**: Never use raw <img> tags
- **Priority Prop**: Add to above-the-fold images for LCP optimization
- **Alt Text**: Required for accessibility
- **Explicit Dimensions**: Always specify width and height
- **Dark Mode Inversion**: Use `dark:invert` class for SVG logos

Example:
```typescript
<Image
  className="dark:invert"
  src="/next.svg"
  alt="Next.js logo"
  width={100}
  height={20}
  priority
/>
```

### Font Optimization
- **next/font/google**: Use for Google Fonts with automatic optimization
- **CSS Variables**: Define font families as CSS variables for Tailwind
- **Subset Selection**: Specify subsets to reduce font file size
- **Variable Fonts**: Prefer variable fonts (Geist, Geist_Mono) for flexibility

Example:
```typescript
const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});
```

### Configuration Patterns
- **TypeScript Config**: Use .ts extension for type-safe configuration
- **Minimal Config**: Only specify non-default options
- **React Compiler**: Enable experimental optimizations with `reactCompiler: true`
- **Type Imports**: Use `import type` for configuration types

Example:
```typescript
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  reactCompiler: true,
};

export default nextConfig;
```

## Accessibility Standards

### Semantic HTML
- **Proper Landmarks**: Use <main>, <nav>, <header>, <footer>
- **Heading Hierarchy**: Logical h1-h6 structure
- **Link Attributes**: Include rel="noopener noreferrer" for external links
- **Target Blank**: Only for external links with proper security attributes

### ARIA and Alt Text
- **Image Alt Text**: Descriptive and meaningful
- **Icon Alt Text**: Describe function, not appearance
- **Button Labels**: Clear action-oriented text
- **Form Labels**: Associated with inputs

## Performance Optimization

### Code Splitting
- **Dynamic Imports**: Use for heavy components not needed immediately
- **Route-Based Splitting**: Automatic with Next.js App Router
- **Component-Level**: Split large component trees

### Asset Optimization
- **Image Formats**: WebP with fallbacks via next/image
- **Font Loading**: Automatic optimization with next/font
- **CSS**: Tailwind purges unused styles in production
- **Bundle Analysis**: Regular checks for bundle size

## Security Best Practices

### External Links
- **Security Attributes**: Always use `target="_blank" rel="noopener noreferrer"`
- **HTTPS Only**: All external links must use HTTPS
- **Content Security**: Validate and sanitize user-generated content

### Environment Variables
- **Public Variables**: Prefix with NEXT_PUBLIC_ for client-side access
- **Secret Management**: Never commit secrets to repository
- **Type Safety**: Define environment variable types

## Testing Standards (Planned)

### Unit Testing
- **Framework**: Jest with React Testing Library
- **Coverage**: Minimum 80% for critical paths
- **File Naming**: ComponentName.test.tsx

### E2E Testing
- **Framework**: Playwright or Cypress
- **Critical Flows**: Authentication, checkout, upload
- **CI Integration**: Run on every PR

## Documentation Standards

### Code Comments
- **Minimal Comments**: Code should be self-documenting
- **Complex Logic**: Explain "why" not "what"
- **TODO Comments**: Include ticket reference
- **Generated Files**: Mark with "NOTE: This file should not be edited"

### Component Documentation
- **Props Interface**: Document complex prop types
- **Usage Examples**: Include in component file or Storybook
- **Edge Cases**: Document known limitations

## Git Workflow

### Commit Messages
- **Format**: Conventional Commits (feat:, fix:, docs:, etc.)
- **Scope**: Include affected area (frontend, backend, docs)
- **Description**: Clear and concise action

### Branch Naming
- **Feature**: feature/description-of-feature
- **Bug Fix**: fix/description-of-bug
- **Documentation**: docs/description-of-change

### Pull Requests
- **Description**: Link to issue, describe changes
- **Review**: Require at least one approval
- **CI Checks**: Must pass before merge

## API Design Patterns (Planned)

### REST Endpoints
- **Naming**: Plural nouns for resources (/tracks, /users)
- **HTTP Methods**: GET (read), POST (create), PUT (update), DELETE (remove)
- **Status Codes**: Proper HTTP status codes (200, 201, 400, 404, 500)
- **Response Format**: Consistent JSON structure

### Error Handling
- **Error Objects**: Include code, message, details
- **Validation Errors**: Field-level error messages
- **Logging**: Structured logging with context

## State Management (Planned)

### Server State
- **React Query**: For API data fetching and caching
- **SWR**: Alternative for simpler use cases
- **Server Components**: Fetch data at component level when possible

### Client State
- **React Context**: For global UI state
- **URL State**: For shareable/bookmarkable state
- **Local State**: useState for component-specific state

## Monitoring and Observability (Planned)

### Logging
- **Structured Logs**: JSON format with context
- **Log Levels**: ERROR, WARN, INFO, DEBUG
- **Sensitive Data**: Never log credentials or PII

### Metrics
- **Performance**: Core Web Vitals tracking
- **Business**: Track key user actions
- **Errors**: Error rate and types

### Alerts
- **Critical**: Page down, payment failures
- **Warning**: High error rate, slow response times
- **Info**: Deployment notifications
